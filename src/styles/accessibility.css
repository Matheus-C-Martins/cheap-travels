/* Enhanced Focus Styles */
*:focus {
  outline: 3px solid #3498db;
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 3px solid #3498db;
  outline-offset: 2px;
  transition: outline-offset 0.2s ease;
}

button:focus-visible,
a:focus-visible {
  outline-offset: 4px;
}

.dark-mode *:focus-visible {
  outline-color: #4a9eff;
}

/* High Contrast Support */
@media (prefers-contrast: high) {
  :root {
    --border-color: #000;
    --text-color: #000;
  }
  
  .dark-mode {
    --border-color: #fff;
    --text-color: #fff;
  }
  
  .deal-card {
    border-width: 2px;
  }
  
  button, a {
    border: 2px solid currentColor;
  }
}

/* Screen Reader Only Content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only-focusable:focus,
.sr-only-focusable:active {
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Enhanced Keyboard Navigation */
.keyboard-nav button:focus,
.keyboard-nav a:focus,
.keyboard-nav input:focus,
.keyboard-nav select:focus {
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.4);
}

.dark-mode.keyboard-nav button:focus,
.dark-mode.keyboard-nav a:focus,
.dark-mode.keyboard-nav input:focus,
.dark-mode.keyboard-nav select:focus {
  box-shadow: 0 0 0 3px rgba(74, 158, 255, 0.4);
}

/* Larger Touch Targets on Mobile */
@media (max-width: 768px) {
  button,
  a.deal-button,
  .filter-btn,
  .language-option {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Text Spacing for Readability */
body {
  line-height: 1.6;
}

h1, h2, h3, h4, h5, h6 {
  line-height: 1.3;
}

p {
  margin-bottom: 1em;
}

/* Animated Content Warning */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Color Contrast Enhancements */
.deal-source,
.detail-text,
.footer-text {
  color: var(--text-secondary);
  font-weight: 500;
}

/* Focus Indicators for Interactive Elements */
.deal-card:focus-within {
  outline: 2px solid #3498db;
  outline-offset: 4px;
}

.dark-mode .deal-card:focus-within {
  outline-color: #4a9eff;
}

/* Ensure Link Text is Distinguishable */
a {
  text-decoration-thickness: 2px;
  text-underline-offset: 2px;
}

a:hover {
  text-decoration-thickness: 3px;
}

/* Loading States */
[aria-busy="true"] {
  cursor: wait;
}

/* Error States */
[aria-invalid="true"] {
  border-color: #e74c3c;
  outline-color: #e74c3c;
}

/* Disabled States */
[disabled],
[aria-disabled="true"] {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Tooltip Accessibility */
[role="tooltip"] {
  position: absolute;
  z-index: 1000;
  padding: 0.5rem;
  background: #2c3e50;
  color: white;
  border-radius: 4px;
  font-size: 0.875rem;
}

.dark-mode [role="tooltip"] {
  background: #0f3460;
}